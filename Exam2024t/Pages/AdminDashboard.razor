@page "/AdminDashboard"
@using Core.Models
@using Exam2024t.Services
@using MongoDB.Bson
@using Microsoft.AspNetCore.Authorization
@inject IApplicationService ApplicationService

<PageTitle>Admin Dashboard</PageTitle>

<h2>Admin Dashboard</h2>

<!--
<h3>You are logged in as:</h3>
<div>
    <p>Username: @admin?.Username</p>
    <p>Name: @admin?.Name</p>
    <p>Email: @admin?.Email</p>
</div>
doesnt work-->


<button class="btn btn-primary" @onclick="ShowAllApplications">Show All Applications</button>


@if (showApplications)
{
<h1>Alle Applicationer</h1>

<table class="table">
    <tbody>
        @foreach (var application in applications)
        {
          
               <tr>
                <td>
                    <p><strong>Child Name:</strong> @application.Child.ChildName</p>
                                <p><strong>Age:</strong> @application.Child.ChildAge</p>
                                <p><strong>Comment:</strong> @application.Child.Comment</p>
                                <p><strong>Been Before:</strong> @application.Child.Beenbefore</p>
                                <p><strong>Interest:</strong> @application.Child.Interest</p>
                        
                </td>
                <td>
                                <p><strong>Volunteer Name:</strong> @application.Child.Volunteer.Name</p>
                                <p><strong>Email:</strong> @application.Child.Volunteer.Email</p>
                                <p><strong>Kræwnr:</strong>  @application.Child.Volunteer.Kræwnr</p>
                </td>
                <td>
                    <p><strong>Volunteer:</strong> @application.IsVolunteer</p>
                    <p><strong>First Priority Week:</strong> @application.FirstpriorityWeek</p>
                    <p><strong>First Priority Period:</strong> @application.FirstpriorityPeriod</p>
                    <p><strong>Second Priority Week:</strong> @application.SecondpriorityWeek</p>
                    <p><strong>Second Priority Period:</strong> @application.SecondpriorityPeriod</p>
                </td>
            </tr>
        }
        
        
    </tbody>
</table>
}




@code {
    //private List<Core.Models.Application> applications;
    private Core.Models.Admin admin = new Core.Models.Admin();


    protected override async Task OnInitializedAsync()
    {
        //admin = await AdminService.GetAll();

    }

    //get all applications method

    private Core.Models.Application[] applications = new Core.Models.Application [0];
    
    private bool showApplications = false;

    [Inject]
    private IApplicationService applicationService { get; set; }

    private async Task ShowAllApplications()
    {
        applications = await applicationService.GetAllApplications();
        showApplications = true;
    }
}
